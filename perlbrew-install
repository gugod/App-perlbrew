#!/usr/bin/env perl

use strict;
use warnings;

chdir '/tmp';

print "## Download the latest perlbrew\n";

my $has_curl;
my $has_wget;

system 'which curl >/dev/null 2>/dev/null' or $has_curl = 1;
system 'which wget >/dev/null 2>/dev/null' or $has_wget = 1;

if($has_curl) {
    system 'curl --silent --location --fail -Lo perlbrew ' .
        'https://raw.github.com/gugod/App-perlbrew/master/perlbrew';
} elsif($has_wget) {
    system 'wget --quiet --no-check-certificate -O perlbrew ' .
        'https://raw.github.com/gugod/App-perlbrew/master/perlbrew';
} else {
    die "You have to install either curl or wget\n";
}

chmod 0755, 'perlbrew';
print "\n## Installing perlbrew\n";
system './perlbrew', 'install';
print "\n## Done.\n";
unlink 'perlbrew';
